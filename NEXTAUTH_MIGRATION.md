# –ú—ñ–≥—Ä–∞—Ü—ñ—è –∑ Clerk –Ω–∞ NextAuth

## ‚úÖ –©–æ –±—É–ª–æ –∑—Ä–æ–±–ª–µ–Ω–æ:

### 1. –í–∏–¥–∞–ª–µ–Ω–æ Clerk
- ‚ùå –í–∏–¥–∞–ª–µ–Ω–æ `@clerk/nextjs` –∑ package.json
- ‚ùå –í–∏–¥–∞–ª–µ–Ω–æ –≤—Å—ñ Clerk –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ —Ç–∞ —Ñ–∞–π–ª–∏
- ‚ùå –í–∏–¥–∞–ª–µ–Ω–æ `clerkId` –∑ Prisma schema
- ‚úÖ –î–æ–¥–∞–Ω–æ –ø–æ–ª–µ `password` –≤ User model

### 2. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ NextAuth
- ‚úÖ –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ `next-auth` —Ç–∞ `bcryptjs`
- ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–æ `/api/auth/[...nextauth]` route
- ‚úÖ –ù–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ Credentials provider

### 3. –°—Ç–≤–æ—Ä–µ–Ω–æ –Ω–æ–≤—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏
- ‚úÖ `/sign-in` - —Ñ–æ—Ä–º–∞ –≤—Ö–æ–¥—É
- ‚úÖ `/sign-up` - —Ñ–æ—Ä–º–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó  
- ‚úÖ `/api/register` - API –¥–ª—è —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó

### 4. –û–Ω–æ–≤–ª–µ–Ω–æ middleware
- ‚úÖ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î JWT —Ç–æ–∫–µ–Ω–∏ NextAuth
- ‚úÖ –ó–∞—Ö–∏—â–∞—î –≤—Å—ñ —Ä–æ—É—Ç–∏ –∫—Ä—ñ–º –ø—É–±–ª—ñ—á–Ω–∏—Ö

### 5. –û–Ω–æ–≤–ª–µ–Ω–æ auth utilities
- ‚úÖ `getCurrentUser()` - –æ—Ç—Ä–∏–º—É—î –ø–æ—Ç–æ—á–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- ‚úÖ `requireUser()` - –≤–∏–º–∞–≥–∞—î –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—é
- ‚úÖ RBAC —Ñ—É–Ω–∫—Ü—ñ—ó –ø—Ä–∞—Ü—é—é—Ç—å —è–∫ —Ä–∞–Ω—ñ—à–µ

## üöÄ –Ø–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ç–∏—Å—å:

### 1. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

–°—Ç–≤–æ—Ä—ñ—Ç—å `.env.local`:
```env
DATABASE_URL="postgresql://..."
NEXTAUTH_URL="http://localhost:3000"
NEXTAUTH_SECRET="your-secret-key"
NEXT_PUBLIC_APP_URL="http://localhost:3000"
```

### 2. –ó–∞–ø—É—Å—Ç—ñ—Ç—å –º—ñ–≥—Ä–∞—Ü—ñ—ó

```bash
npx prisma migrate dev
npx prisma generate
```

### 3. –°—Ç–≤–æ—Ä—ñ—Ç—å –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞

–û–ø—Ü—ñ—è 1 - —á–µ—Ä–µ–∑ Prisma Studio:
```bash
npx prisma studio
```

–û–ø—Ü—ñ—è 2 - —á–µ—Ä–µ–∑ seed —Å–∫—Ä–∏–ø—Ç:
```bash
npm run seed
```

### 4. –ó–∞–ø—É—Å—Ç—ñ—Ç—å –¥–æ–¥–∞—Ç–æ–∫

```bash
npm run dev
```

## üìù –í–∞–∂–ª–∏–≤—ñ –∑–º—ñ–Ω–∏:

1. **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è —Ç–µ–ø–µ—Ä —á–µ—Ä–µ–∑ email/password**
   - –ù–µ–º–∞—î social login
   - –ù–µ–º–∞—î 2FA (–º–æ–∂–Ω–∞ –¥–æ–¥–∞—Ç–∏ –ø—ñ–∑–Ω—ñ—à–µ)

2. **–°–µ—Å—ñ—ó –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ JWT**
   - –ù–µ –ø–æ—Ç—Ä–µ–±—É—î –¥–æ–¥–∞—Ç–∫–æ–≤–æ—ó –ë–î
   - –ü—Ä–∞—Ü—é—î –∑ serverless

3. **RBAC –ø—Ä–∞—Ü—é—î —è–∫ —Ä–∞–Ω—ñ—à–µ**
   - –†–æ–ª—ñ: ADMIN, PROCUREMENT, REQUESTER
   - –í—Å—ñ permissions –∑–±–µ—Ä–µ–∂–µ–Ω—ñ

## üîß –î–ª—è production:

1. –ó–≥–µ–Ω–µ—Ä—É–π—Ç–µ –±–µ–∑–ø–µ—á–Ω–∏–π NEXTAUTH_SECRET:
   ```bash
   openssl rand -base64 32
   ```

2. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ NEXTAUTH_URL –Ω–∞ –≤–∞—à –¥–æ–º–µ–Ω

3. –î–æ–¥–∞–π—Ç–µ HTTPS

4. –†–æ–∑–≥–ª—è–Ω—å—Ç–µ –¥–æ–¥–∞–≤–∞–Ω–Ω—è:
   - Email verification
   - Password reset
   - 2FA
   - Rate limiting

## ‚ö†Ô∏è –í—ñ–¥–æ–º—ñ –æ–±–º–µ–∂–µ–Ω–Ω—è:

- –ù–µ–º–∞—î social login (–º–æ–∂–Ω–∞ –¥–æ–¥–∞—Ç–∏)
- –ù–µ–º–∞—î email verification (–º–æ–∂–Ω–∞ –¥–æ–¥–∞—Ç–∏)
- –ù–µ–º–∞—î password reset (–º–æ–∂–Ω–∞ –¥–æ–¥–∞—Ç–∏)
- –ü—Ä–æ—Å—Ç—ñ—à–∞ —Å–∏—Å—Ç–µ–º–∞ –Ω—ñ–∂ Clerk, –∞–ª–µ –ø–æ–≤–Ω—ñ—Å—Ç—é –ø—ñ–¥ –≤–∞—à–∏–º –∫–æ–Ω—Ç—Ä–æ–ª–µ–º

---

**–î–∞—Ç–∞:** 2025-01-15  
**–°—Ç–∞—Ç—É—Å:** Migration Complete ‚úÖ
